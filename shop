<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AmaniKay Farm Market</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://api.backendless.com/sdk/js/latest/backendless.min.js"></script>
    <style>
        :root {
            --bg-deep: #1e2b22; /* Specific dark green from your design */
            --filter-bg: #2a382e;
            --accent-gold: #bda05e;
            --text-gray: #a9b3ab;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-deep);
            color: #ffffff;
            margin: 0;
            padding: 40px 0;
        }

        .container { max-width: 900px; margin: 0 auto; padding: 0 20px; }

        /* --- Top Header --- */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .search-row {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .farm-badge {
            background: #2d422d;
            padding: 4px 14px;
            border-radius: 20px;
            border: 1px solid #3d523d;
            font-size: 0.8rem;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.2rem;
            margin: 0;
            line-height: 1.1;
        }

        .tagline {
            color: var(--text-gray);
            font-weight: 300;
            margin-top: 10px;
            font-size: 1.1rem;
        }

        /* --- Filter Section --- */
        .section-label {
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 1.5px;
            margin: 40px 0 15px;
            display: block;
            font-weight: 600;
        }

        .filter-capsule {
            background: var(--filter-bg);
            border: 1px solid #3d4d41;
            padding: 8px;
            border-radius: 50px;
            display: inline-flex;
            gap: 8px;
            margin-bottom: 50px;
        }

        .filter-btn {
            background: transparent;
            border: none;
            color: #ffffff;
            padding: 6px 18px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: 0.2s;
        }

        .filter-btn.active {
            background: var(--accent-gold);
            color: #1e2b22;
            font-weight: 600;
        }

        /* --- Product Grid --- */
        .grid-header {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: block;
        }

        .market-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .product-card {
            background: #ffffff;
            border-radius: 12px;
            overflow: hidden;
            color: #333;
            position: relative;
        }

        .img-holder {
            height: 150px;
            position: relative;
        }

        .img-holder img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .category-tag {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: #fff;
            font-size: 0.65rem;
            padding: 3px 10px;
            border-radius: 4px;
            text-transform: uppercase;
        }

        .card-info {
            padding: 15px;
        }

        .brand-sub {
            font-size: 0.7rem;
            color: #888;
            display: block;
        }

        .product-card h3 {
            margin: 5px 0;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .price-row {
            margin-top: 10px;
            font-weight: 700;
            font-size: 1rem;
        }

        .wa-btn {
            background: #2cb742;
            color: #fff;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        @media (max-width: 600px) {
            h1 { font-size: 2.2rem; }
            .market-grid { grid-template-columns: 1fr 1fr; gap: 12px; }
            .filter-capsule { flex-wrap: wrap; border-radius: 20px; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="top-bar">
        <span>Shop Heaker</span>
        <div class="search-row">
            <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
            <div class="farm-badge">AmaniKay Farm</div>
        </div>
    </div>

    <h1>Farm-to-Door Market</h1>
    <p class="tagline">Sustainably grown, youth-led, ethicaly delivery.</p>

    <span class="section-label">Filter Section</span>
    <div class="filter-capsule" id="filters">
        <button class="filter-btn active" onclick="filterData('All', this)">All</button>
        <button class="filter-btn" onclick="filterData('Honey', this)">Honey</button>
        <button class="filter-btn" onclick="filterData('Vegetables', this)">Vegetables</button>
        <button class="filter-btn" onclick="filterData('Seeds', this)">Seeds</button>
        <button class="filter-btn" onclick="filterData('Tubers', this)">Tubers</button>
    </div>

    <span class="grid-header">Product grid</span>
    <main id="product-grid" class="market-grid">
        </main>
</div>

<script>
    const APP_ID = "91A41A61-DD6C-481F-ADCA-41A9C5ED0376";  
    const JS_KEY = "39DB2B85-5B1D-4EA8-8F06-5095CF152ED3";  
    const PHONE = "254XXXXXXXXX"; // Replace with your number

    Backendless.initApp(APP_ID, JS_KEY);

    let store = [];

    async function fetchStore() {
        try {
            store = await Backendless.Data.of("Products").find();
            draw(store);
        } catch (e) { console.error(e); }
    }

    function draw(items) {
        const grid = document.getElementById('product-grid');
        grid.innerHTML = items.map(p => `
            <div class="product-card">
                <div class="img-holder">
                    <span class="category-tag">${p.category || 'Pure'}</span>
                    <img src="${p.imageurl || 'https://via.placeholder.com/200'}" alt="${p.name}">
                </div>
                <div class="card-info">
                    <span class="brand-sub">Pure</span>
                    <h3>${p.name}</h3>
                    <div class="price-row">Ksh ${p.price || '---'}</div>
                    <a href="https://wa.me/${PHONE}?text=Ordering: ${p.name}" target="_blank" class="wa-btn">
                        WhatsApp Number <svg width="12" height="12" fill="white" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.417-.003 6.557-5.338 11.892-11.893 11.892-1.997-.001-3.951-.5-5.688-1.448l-6.305 1.652zm6.599-3.835c1.406.836 2.964 1.28 4.547 1.281 5.037 0 9.14-4.102 9.143-9.142.002-2.443-.949-4.739-2.677-6.47s-4.027-2.68-6.469-2.682c-5.038 0-9.141 4.102-9.143 9.142-.001 1.595.42 3.15 1.22 4.549l-.142.228-1.11 4.05 4.14-.1.231-.138zm10.518-6.72c-.287-.144-1.702-.84-1.965-.936-.264-.096-.456-.144-.648.144-.192.288-.744.936-.912 1.128-.168.192-.336.216-.624.072-.288-.144-1.215-.448-2.313-1.43-.855-.762-1.431-1.705-1.599-1.992-.168-.288-.018-.443.126-.587.13-.13.288-.336.432-.504.144-.168.192-.288.288-.48.096-.192.048-.36-.024-.504-.072-.144-.648-1.56-.888-2.136-.234-.564-.472-.487-.648-.495-.168-.008-.36-.008-.552-.008s-.504.072-.768.36c-.264.288-1.008.984-1.008 2.399 0 1.416 1.032 2.784 1.176 2.976.144.192 2.031 3.1 4.92 4.352.687.297 1.224.474 1.642.607.69.219 1.319.188 1.815.114.553-.083 1.702-.696 1.942-1.368.24-.672.24-1.248.168-1.368-.072-.12-.264-.192-.552-.336z"/></svg>
                    </a>
                </div>
            </div>
        `).join('');
    }

    function filterData(cat, btn) {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        if (cat === 'All') draw(store);
        else draw(store.filter(i => i.category === cat));
    }

    window.onload = fetchStore;
</script>
</body>
</html>
