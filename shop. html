<!doctype html>
<html lang="en"> 
 <head> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <title>Shop | AmaniKay Farm</title> 
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&amp;display=swap" rel="stylesheet"> 
  <script src="https://api.backendless.com/sdk/js/latest/backendless.min.js"></script> 
  <style>
        :root {
            --primary: #0a3d1d;
            --secondary: #2e7d32;
            --accent: #fbbf24;
            --light: #fdfcf9;
            --dark: #1a1a1a;
            --gray: #6b7280;
        }
        body { font-family: 'Poppins', sans-serif; margin: 0; background-color: var(--light); color: var(--dark); }

        .container { width: 92%; max-width: 1200px; margin: 0 auto; }

        header { background: #fff; padding: 1rem 0; border-bottom: 1px solid #eee; position: sticky; top: 0; z-index: 100; }
        .header-flex { display: flex; justify-content: space-between; align-items: center; }
        .logo a { text-decoration: none; color: var(--primary); font-weight: 800; font-size: 1.4rem; text-transform: uppercase; }

        /* Filter Bar */
        .filter-bar { background: #fff; padding: 20px 0; border-bottom: 1px solid #eee; }
        .filter-flex { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 5px; }
        .filter-btn { 
            padding: 8px 20px; border: 1px solid #ddd; border-radius: 50px; 
            background: #fff; cursor: pointer; font-weight: 600; white-space: nowrap; transition: 0.3s;
        }
        .filter-btn.active { background: var(--primary); color: #fff; border-color: var(--primary); }

        /* Shop Grid */
        .shop-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
            gap: 30px; 
            padding: 40px 0; 
        }
        .product-card { 
            background: #fff; border-radius: 12px; overflow: hidden; 
            border: 1px solid #eee; transition: 0.3s; display: flex; flex-direction: column;
        }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.05); }
        
        .img-box { width: 100%; height: 280px; background: #f0f0f0; overflow: hidden; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; }

        .p-info { padding: 20px; flex-grow: 1; text-align: center; }
        .p-cat { font-size: 0.75rem; color: var(--gray); text-transform: uppercase; font-weight: 700; letter-spacing: 1px; }
        .p-name { font-size: 1.2rem; font-weight: 700; margin: 8px 0; }
        .p-price { font-size: 1.4rem; font-weight: 800; color: var(--secondary); margin-bottom: 20px; }

        .buy-btn { 
            background: var(--primary); color: #fff; width: 100%; border: none; 
            padding: 15px; font-weight: 700; cursor: pointer; transition: 0.3s; border-radius: 0 0 12px 12px;
        }
        .buy-btn:hover { background: #000; }

        .empty-state { text-align: center; padding: 100px 20px; display: none; }

        footer { background: var(--dark); color: #fff; padding: 40px 0; text-align: center; margin-top: 60px; }
    </style> 
 </head> 
 <body> 
  <header> 
   <div class="container header-flex"> 
    <div class="logo">
     <a href="index.html">AmaniKay</a>
    </div> 
    <nav>
     <a href="index.html" style="text-decoration:none; color:var(--dark); font-weight:600; font-size:0.9rem;">BACK TO HOME</a>
    </nav> 
   </div> 
  </header> 
  <div class="filter-bar"> 
   <div class="container filter-flex"> <button class="filter-btn active" onclick="filterProducts('All', this)">All Harvest</button> <button class="filter-btn" onclick="filterProducts('Beekeeping', this)">Honey &amp; Bees</button> <button class="filter-btn" onclick="filterProducts('Crops', this)">Crops</button> <button class="filter-btn" onclick="filterProducts('Trees', this)">Trees</button> 
   </div> 
  </div> 
  <main class="container"> 
   <div id="shop-grid" class="shop-grid"> 
    <p>Loading fresh harvest...</p> 
   </div> 
   <div id="empty-msg" class="empty-state"> 
    <h2>No items found in this category.</h2> 
    <p>Check back soon or view all products.</p> 
   </div> 
  </main> 
  <footer> 
   <p>Â© 2026 AmaniKay Farm. Climate Smart Farming is Sexy.</p> 
  </footer> 
  <script>
        const APP_ID = "91A41A61-DD6C-481F-ADCA-41A9C5ED0376";
        const JS_API_KEY = "39DB2B85-5B1D-4EA8-8F06-5095CF152ED3";
        Backendless.initApp(APP_ID, JS_API_KEY);

        let allProducts = [];

        function buyOnWhatsApp(name, price) {
            const phone = "254700000000"; // REPLACE WITH YOUR ACTUAL NUMBER
            const msg = `Hello AmaniKay Farm! I want to order: ${name} (Ksh ${price}). Please confirm my order.`;
            window.location.href = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
        }

        async function loadShop() {
            try {
                allProducts = await Backendless.Data.of("Products").find();
                renderProducts(allProducts);
            } catch (err) {
                document.getElementById('shop-grid').innerHTML = "<p>Error loading products. Please refresh.</p>";
            }
        }

        function renderProducts(products) {
            const grid = document.getElementById('shop-grid');
            const empty = document.getElementById('empty-msg');
            
            if (products.length === 0) {
                grid.style.display = "none";
                empty.style.display = "block";
                return;
            }

            grid.style.display = "grid";
            empty.style.display = "none";
            grid.innerHTML = "";

            products.forEach(p => {
                const img = p.imageUrl || p.imageurl || 'https://via.placeholder.com/400x300';
                const price = p.price || "0";
                
                grid.innerHTML += `
                    <div class="product-card">
                        <div class="img-box"><img src="${img}" alt="${p.name}" loading="lazy"></div>
                        <div class="p-info">
                            <span class="p-cat">${p.category || 'Harvest'}</span>
                            <h3 class="p-name">${p.name}</h3>
                            <p class="p-price">Ksh ${price}</p>
                        </div>
                        <button class="buy-btn" onclick="buyOnWhatsApp('${p.name}', '${price}')">ORDER ON WHATSAPP</button>
                    </div>
                `;
            });
        }

        function filterProducts(category, btn) {
            // UI Toggle
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // Logic
            if (category === 'All') {
                renderProducts(allProducts);
            } else {
                const filtered = allProducts.filter(p => p.category === category);
                renderProducts(filtered);
            }
        }

        window.onload = loadShop;
    </script> 
 </body>
</html>



